@page "/document-library"
@using ComposedHealthBase.BaseClient.Components
@using ComposedHealthBase.BaseClient.Services
@using Shared.DTOs.CRM
@inject ILazyLookupService<CustomerDocumentDto> DocumentLookupService

<DocumentBrowser TDto="CustomerDocumentDto" Documents="documents" NewDocument="newDocument" OnSave="OnDocumentSave" />

@code {
    private List<CustomerDocumentDto> documents = new();
    private CustomerDocumentDto newDocument = new CustomerDocumentDto
    {
        CustomerId = new Guid("20202020-2020-2020-2020-202020202020"),
        Name = "",
        FilePath = ""
    };
    protected override async Task OnInitializedAsync()
    {
        documents = (await DocumentLookupService.GetAllByTenantId(new Guid("20202020-2020-2020-2020-202020202020"), CancellationToken.None)).ToList();
    }
    private async Task OnDocumentSave()
    {
        documents = (await DocumentLookupService.GetAllByTenantId(new Guid("20202020-2020-2020-2020-202020202020"), CancellationToken.None)).ToList();
        newDocument = new CustomerDocumentDto
        {
            CustomerId = new Guid("20202020-2020-2020-2020-202020202020"),
            Name = "",
            FilePath = ""
        };
    }
}